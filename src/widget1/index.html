<div class="charts__views" [ngClass]="viewType === 'MAP' ? 'charts__views--full': ''">
    <div class="charts__view"
         [hidden]="!(viewType === 'DYNAMIC' || viewType === 'PROFILE' || viewType === 'DISTRIBUTION')">
        <div class="charts__title">
            <div class="mat-title" [hidden]="!(viewType === 'DYNAMIC')">
                <span *ngIf="period === 'day'">{{_.upperFirst(selectedDate.format('D MMM, dddd'))}}</span>
                <span *ngIf="period === 'week'">{{_.upperFirst(moment(timeInterval.controls['startDate'].value).format('D MMM, ddd'))}} – {{_.upperFirst(moment(timeInterval.controls['endDate'].value).format('D MMM, ddd'))}}</span>
                <span *ngIf="period === 'month'">{{_.upperFirst(selectedDate.format('MMMM YYYY'))}}</span>
                <span *ngIf="period === 'year'">{{_.upperFirst(selectedDate.format('YYYY'))}}</span>
                <span *ngIf="period === 'millisecond'">{{_.upperFirst(moment(timeInterval.controls['startDate'].value).format('D MMM, dddd'))}} – {{_.upperFirst(moment(timeInterval.controls['endDate'].value).format('D MMM, dddd'))}}</span>
            </div>
            <div class="mat-title" [hidden]="!(viewType === 'PROFILE')">
                <span>Профиль: </span><span>{{_.find(periods, ['value', period])['name']}}</span>
            </div>
            <div class="mat-title" [hidden]="!(viewType === 'DISTRIBUTION')">
                <span>Распределение: </span><span>{{_.upperFirst(moment(timeInterval.controls['startDate'].value).format('D MMM, dddd'))}} – {{_.upperFirst(moment(timeInterval.controls['endDate'].value).format('D MMM, dddd'))}}</span>
            </div>
            <div class="mat-subheader" *ngIf="selectedTemplate">Шаблон: {{selectedTemplate['title']}}</div>
        </div>
        <div class="charts__chart">
            <svg class="diagram charts__svg" width="100%" height="100%" #svgElement></svg>
        </div>
        <div class="charts__domain"
             [ngStyle]="{'padding-left.px': xDomain.offset['left'], 'padding-right.px': xDomain.offset['right']}">
            <div class="charts__tick"
                 [hidden]="!(viewType === 'DYNAMIC')"
                 [ngClass]="{'charts__tick--link': xDomain.frequency !== 'hour'}"
                 (click)="zoomIn(x, xDomain.frequency)"
                 *ngFor="let x of xDomain.values">
                <div *ngIf="xDomain.frequency === 'hour'">{{x.format('H')}}<sup>00</sup></div>
                <div *ngIf="xDomain.frequency === 'day'" class="charts__link">{{x.format('D')}}</div>
                <div *ngIf="xDomain.frequency === 'day'" class="charts__tick-sub-title charts__link">
                    {{x.format('ddd')}}
                </div>
                <div *ngIf="xDomain.frequency === 'week'" class="charts__link">{{x.format('D MMM, ddd')}}</div>
                <div *ngIf="xDomain.frequency === 'month'" class="charts__link">{{x.format('MMM')}}</div>
                <div *ngIf="xDomain.frequency === 'year'" class="charts__link">{{x.format('YYYY')}}</div>
            </div>
            <div class="charts__tick"
                 [hidden]="!(viewType === 'PROFILE')"
                 *ngFor="let x of xDomain.values">
                <div *ngIf="period === 'day'">{{x.format('H')}}<sup>00</sup></div>
                <div *ngIf="period === 'week'">{{x.format('ddd')}}</div>
                <div *ngIf="period === 'year'">{{x.format('MMM')}}</div>
            </div>
            <div class="charts__tick"
                 [hidden]="!(viewType === 'DISTRIBUTION')"
                 *ngFor="let x of resources[0].controls['data'].value; index as index">
                <span [hidden]="(resources[0].controls['data'].value.length > 25 && (index % 5) !== 0)">{{_.round(resources[0].controls['data'].value[index]['kpiValueHalfStep'], 1)}}</span>
            </div>
        </div>
    </div>
    <div class="charts__view"
         [hidden]="viewType !== 'STATIC'">
        <div class="charts__title">
            <div class="mat-title">Разброс данных</div>
            <div class="mat-subheader" *ngIf="selectedTemplate">Шаблон: {{selectedTemplate['title']}}</div>
        </div>
        <div class="charts__chart charts__chart--tall">
            <svg class="diagram charts__svg" width="100%" height="100%" #svgElement1></svg>
        </div>
    </div>
    <div class="charts__view"
         [hidden]="viewType !== 'MAP'">
        <div class="charts__title--up">
            <div class="mat-title mat-elevation-z4">
                <span *ngIf="period === 'day'">{{_.upperFirst(selectedDate.format('D MMM, dddd'))}}</span>
                <span *ngIf="period === 'week'">{{_.upperFirst(moment(timeInterval.controls['startDate'].value).format('D MMM, ddd'))}} – {{_.upperFirst(moment(timeInterval.controls['endDate'].value).format('D MMM, ddd'))}}</span>
                <span *ngIf="period === 'month'">{{_.upperFirst(selectedDate.format('MMMM YYYY'))}}</span>
                <span *ngIf="period === 'year'">{{_.upperFirst(selectedDate.format('YYYY'))}}</span>
                <span *ngIf="period === 'millisecond'">{{_.upperFirst(moment(timeInterval.controls['startDate'].value).format('D MMM, dddd'))}} – {{_.upperFirst(moment(timeInterval.controls['endDate'].value).format('D MMM, dddd'))}}</span>
            </div>
        </div>
        <div id="charts__map" class="charts__map"></div>
    </div>
</div>
<div class="charts__legend"
     [hidden]="!(showView && (viewType === 'DYNAMIC' || viewType === 'PROFILE'))">
    <div class="charts__legend-group" *ngFor="let group of actualResourceGroups">
        <div *ngFor="let r of group">
            <span class="charts__item-color--{{r.controls['color'].value[1]}}" [ngClass]="r.controls['drawingType'].value === 'HISTOGRAM' ? 'charts__r' : 'charts__l'"></span>
            <span class="mdl-typography--caption-color-contrast">{{getResourceName(r.controls['dataSource'].value.controls.value.value)}}</span>
        </div>
    </div>
</div>
