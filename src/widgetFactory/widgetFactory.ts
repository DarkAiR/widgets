import {WidgetConfig} from "../models/widgetConfig";
import {DataProvider} from "..";
import {ChartBar} from "../chartBar";
import {AverageNumberChart} from "../averageNumberChart";
import {IChartData} from "../interfaces";

export class WidgetFactory {
    dataProvider: DataProvider = new DataProvider();

    run(config: WidgetConfig): void {
        if (!config.type) {
            console.error('Required field "type" is not specified');
            return;
        }
        if (!config.templateId) {
            console.error('Required field "templateId" is not specified');
            return;
        }
        switch (config.type) {
            case "chartBar":
                this.chartBar(config);
                break;
            case "averageNumber":
                this.averageNumberChart(config);
                break;
            case "averageSpline":
                console.error('Not supported');
                break;
            case "solidGauge":
                console.error('Not supported');
                break;
            case "indicatorsTable":
                console.error('Not supported');
                break;
        }
    }

    private chartBar(config: WidgetConfig): void {
        const data2 = JSON.parse('{"properties":{"startDate":"2018-10-31T19:00:00.000Z","endDate":"2018-11-30T18:59:59.999Z","frequency":"day","drawingType":"HISTOGRAM","secondaryAxis":false,"height":null,"currency":false},"indicators":[],"values":[{"date":"2018-10-31T19:00:00.000Z","data":[{"color":["teal-400"],"value":210.41,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-10-31T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":190,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-10-31T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-01T19:00:00.000Z","data":[{"color":["teal-400"],"value":215.46,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-01T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":218,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-01T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-02T19:00:00.000Z","data":[{"color":["teal-400"],"value":254.88,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-02T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":232,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-02T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-03T19:00:00.000Z","data":[{"color":["teal-400"],"value":241.59,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-03T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":223,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-03T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-04T19:00:00.000Z","data":[{"color":["teal-400"],"value":229.45,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-04T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":155.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-04T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-05T19:00:00.000Z","data":[{"color":["teal-400"],"value":186.08,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-05T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":189,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-05T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-06T19:00:00.000Z","data":[{"color":["teal-400"],"value":193.34,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-06T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":180.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-06T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-07T19:00:00.000Z","data":[{"color":["teal-400"],"value":199.92,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-07T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":229,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-07T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-08T19:00:00.000Z","data":[{"color":["teal-400"],"value":233.93,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-08T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":185,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-08T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-09T19:00:00.000Z","data":[{"color":["teal-400"],"value":257.11,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-09T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":250,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-09T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-10T19:00:00.000Z","data":[{"color":["teal-400"],"value":235.36,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-10T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":196,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-10T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-11T19:00:00.000Z","data":[{"color":["teal-400"],"value":192.79,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-11T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":196.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-11T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-12T19:00:00.000Z","data":[{"color":["teal-400"],"value":194.36,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-12T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":166.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-12T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-13T19:00:00.000Z","data":[{"color":["teal-400"],"value":193.74,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-13T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":190.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-13T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-14T19:00:00.000Z","data":[{"color":["teal-400"],"value":199.64,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-14T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":200,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-14T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-15T19:00:00.000Z","data":[{"color":["teal-400"],"value":201.92,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-15T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":205.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-15T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-16T19:00:00.000Z","data":[{"color":["teal-400"],"value":249.34,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-16T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":231.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-16T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-17T19:00:00.000Z","data":[{"color":["teal-400"],"value":237.61,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-17T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":227,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-17T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-18T19:00:00.000Z","data":[{"color":["teal-400"],"value":187.41,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-18T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":172.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-18T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-19T19:00:00.000Z","data":[{"color":["teal-400"],"value":190.44,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-19T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":186,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-19T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-20T19:00:00.000Z","data":[{"color":["teal-400"],"value":193.55,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-20T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":160.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-20T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-21T19:00:00.000Z","data":[{"color":["teal-400"],"value":209.93,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-21T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":211.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-21T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-22T19:00:00.000Z","data":[{"color":["teal-400"],"value":216.84,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-22T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":191.5,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-22T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-23T19:00:00.000Z","data":[{"color":["teal-400"],"value":268.1,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-23T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":273,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-23T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-24T19:00:00.000Z","data":[{"color":["teal-400"],"value":251.63,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-24T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":202,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-24T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-25T19:00:00.000Z","data":[{"color":["teal-400"],"value":200.85,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-25T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":194,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-25T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-26T19:00:00.000Z","data":[{"color":["teal-400"],"value":210.28,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-26T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":150,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-26T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-27T19:00:00.000Z","data":[{"color":["teal-400"],"value":216.99,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-27T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":185,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-27T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-28T19:00:00.000Z","data":[{"color":["teal-400"],"value":227.8,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-28T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":192,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-28T19:00:00.000Z","kpi":"shifts-v2"}}]},{"date":"2018-11-29T19:00:00.000Z","data":[{"color":["teal-400"],"value":234.17,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-29T19:00:00.000Z","kpi":"fte"}},{"color":["red-400"],"value":221,"delta":0,"interactive":true,"_bar":true,"_data":{"organizationUnit":"114","date":"2018-11-29T19:00:00.000Z","kpi":"shifts-v2"}}]}]}');
        new ChartBar().run(config, data2);
    }

    private averageNumberChart(config: WidgetConfig): void {
        this.dataProvider.getData(config).then((data: IChartData) => {
            new AverageNumberChart().run(config, data);
        })
    }
}
