### ChangeLog

##### 1.11.10 / 2022-12-02
- В ProductionPlan исправлена установка title и kpi через шину
- В ProductionPlan добавлен процент fact / plan

##### 1.11.9 / 2022-12-01
- В ProductionPlan добавлена установка title и kpi через шину

##### 1.11.8 / 2022-04-12
- Из InventoryTable вырезаются пустые колонки

##### 1.11.7 / 2022-04-11
- Исправлена отправка limit в JoinDataSet

##### 1.11.6 / 2022-03-23
- Добавлен limit в JoinDataSet

##### 1.11.5 / 2022-02-22
- Добавлена передача периода по шине для inventiveTable

##### 1.11.4 / 2022-02-16
- Учитывать группировку для табличных данных при получении orgUnits по шине

##### 1.11.3 / 2022-02-10
- В ProductionPlan добавлены настройки отображения значения

##### 1.11.2 / 2022-02-03
- Исправлена ошибка с использованием общего шаблона в разных виджетах при вызове runWithSource

##### 1.11.1 / 2022-02-03
- Добавлена проверка на существование DOM-элементов в productionPlan
- Переименована команда сборки без линтера

##### 1.11.0 / 2022-01-20
- IDataProvider
- README, section DataProvider
- DataProvider:getDimensionsInfo moved to categoryData.helper
- rewrite productionPlan widget
- Added setting "legend.oneRow" to display legend with a scroll in one row
- Changed legend icon from "rectRound" to "circle" 
- Fixed "pie" tooltip
- Added "chartPaddings" to "pie"

##### 1.10.2 / 2021-11-30
- исправлен порядок вывода метрик в inventiveTable

##### 1.10.1 / 2021-11-17
- схлопнуты настройки для inventiveTable 

##### 1.10.0 / 2021-11-15
- виджет InventiveTable
- Таблица
  - исправлено получение названий в dimensions в колонках (mapToNames)
  - исправлено отображение заголовка
- в DateHelper::time добавлен флаг отображения секунд
- в widgetSettings/index.ts добавлен widgetSettings/types.ts
- изменен модуль settings с widgetSettings/controls/ -> widgetSettings/
- Для типов (src/types/) делан отдельный модуль abc-charts/types
- Дополнены описания настроек виджетов, комментарии к функциям и README

##### 1.9.3 / 2021-11-11
- hide DisciplineReport

##### 1.9.2 / 2021-11-11
- revert

##### 1.9.1 / 2021-11-11
- отменено переименование widgetFactory
- из interfaces убран import для promise

##### 1.9.0 / 2021-11-10
- Изменены названия файлов на CamelCase
- типы вынесены в отдельную директорию
  - models/types -> types/types
  - models/typesGraphQL -> types/graphQL
  - interfaces/promise -> types/promise

##### 1.8.11 / 2021-11-02
- Верстка виджета productionPlan

##### 1.8.10 / 2021-10-31
- Поменяны местами виджеты disciplineReport и productionPlan
- Исправлены стили в productionPlan
- Переписан productionPlan
- productionPlan теперь слушает даты, в заголовке меняется только текст, 

##### 1.8.9 / 2021-10-05
- Исправлена ошибка в виджете disciplineReport

##### 1.8.1 / 2021-09-20
- Добавлена проверка на пустую строку при отображении заголовка

##### 1.8.0 / 2021-09-06
- widget disciplineReport
- widget productionPlan
- autoreplace class names in template
- remove "table-small" class from table
- use external font-family instead of internal
- refresh README
- update goodt-framework-css@1.1.3
- changed webpack.common
    - widgetConfig put outside general library
    - changing lib size


##### 1.7.2 / 2021-05-28
- исправлена ошибка в pie - label:distanceToLabelLine
- добавлено форматирование даты в таблице в зависимости от выбранной frequency
- сделана сортировка данных в таблице по возрастанию
- добавлен dayjs

##### 1.7.1 / 2021-05-20
- настройки радиусов по-умолчанию открыты

##### 1.7.0 / 2021-05-18
- Миграция echarts c 4.8.0 на 5.1.1
- Круговая диаграмма Pie
- Редактирование цвета каждой категории
- Рефакторинг виждетов и их настроек
  - работа с категориями вынесена в отдельный хелпер
  - адресация к настройкам dataSet через индекс
  - удален метод getColor, переделано на работу с цветом по месту
  - конфигурация lineStyle вынесена в хелпер

##### 1.6.6 / 2021-05-06
- Добавлены типы ресурсов DATASOURCE и DASHBOARD

##### 1.6.5 / 2021-04-15
- Добавлена обработка exceptions при вызове redraw

##### 1.6.4 / 2021-03-31
- Изменен сериализатор агрегированных данных

##### 1.6.3 / 2021-02-14
- MetricFilterType

##### 1.6.2 / 2021-02-01
- Для виждета KPI добавлены настройки paddings и dataSourceName
- Для виждета KPI добавлена обработка period, dateFrom, dateTo, versionFilter

##### 1.6.1 / 2021-01-23
- Изменено получение текста ошибок из запросов API
- Возвращается ошибка при невозможности загрузить шаблон виджета

##### 1.6.0 / 2020-11-25
- Переписана инициализация виджета, теперь все события получают _cb.func которая сообщает родителю, что асинхронное событие завершилось
 
##### 1.5.2 / 2020-11-19
- Убран фикс по конвертации upperTime в строку из числа

##### 1.5.1 / 2020-11-03
- fix name of import VersionFilter
- switch событий переписан на Record

##### 1.5.0 / 2020-11-03
- добавлена обработка события 'version filter' в виджеты category / spline / distibution / profile
- лоадер на виджетах при парсинге данных. Из-за того, что не все события по шине обрабатываются, нельзя включать лоадер извне библиотеки.
- обработчик событий переписан на async
- типы событий каждого виджета вынесены в отдельные типы
- укорочено описание некоторых событий шины
- IChart::getDataSources -> IChart::getDataSourceNameIds 

##### 1.4.10 / 2020-11-02
- отмена фильтрации dimensions c version=true

##### 1.4.9 / 2020-11-02
- преобразование upperTime в строку

##### 1.4.8 / 2020-11-02
- добавлена version для DataSource отдельным полем
- getDataSource -> getDataSourceInfo
- фильтрация dimensions c version=true

##### 1.4.7 / 2020-10-29
- Добавлена асинхронность во все сериализаторы для DataSource

##### 1.4.6 / 2020-10-20
- добавлен version в getDataSources
- исправлена ошибка при получении данных для dataSource.name === '' и последующего преобразования в TimeSeries

##### 1.4.5 / 2020-10-10
- ResourceGroupsSettings перенесен в конструктор виджетов и удален из библиотеки 

##### 1.4.4 / 2020-10-10
- DimensionInfo::version
- добавлен флаг logs::loadingTemplate и оставшиеся console.log внесены под флаги

##### 1.4.3 / 2020-10-05
- настройка dataSource.settings.name перенесена в структуру с {name, id}
- исправлено получение dataSource.settings.name.id

##### 1.4.2 / 2020-10-02
- в виджет (IChart) добавлены методы для получения названий источников данных (getDataSources) и его индекса (getDataSourceIndex)

##### 1.4.1 / 2020-09-24
- К осям Х добавлено свойство maxValueLength - макс. длина одной строки label
- тултипы выравнены по центру курсора
- убрано обрезание по краям виджета для тех, у которых есть тултиппы
 
##### 1.4.0 / 2020-09-23
- добавлены widgetOptions с настройками отключения логов

##### 1.3.1 / 2020-09-21
- отключены groupBy для изменения orgUnits по шине для всех виджетов, кроме table и category

##### 1.3.0 / 2020-09-18
- для виджетов Category, Distribution и Profile добавлена обработка OrgUnits, событий дат и остальных
- в событие 'org units' передается список групп с groupBy

##### 1.2.0 / 2020-09-09
- Переписана логика создания виджета
- В WidgetConfig добавлен hook-метод afterCreate для возможности предварительной инициализации виджета по шине
- В виджет добавлен флаг initialized, который 

##### 1.1.1 / 2020-08-31
- Настройка отображения линии оси "showLine"
- Настройка рамки графика для "spline"

##### 1.1.0 / 2020-08-28
- Поддержка множества осей Х

##### 1.0.4 / 2020-08-16
- Удален ResourceSelectSetting
- Добавлен ResourceGroupsSetting

##### 1.0.3 / 2020-08-13
- в ResourceSetting добавлены type и code
- в StringSetting добавлен readonly

##### 1.0.2 / 2020-08-11
- добавлен required во все настройки
- добавлен ResourceSelectSetting

##### 1.0.1 / 2020-08-10
- добавлен multiple в ListSetting

##### 1.0.0 / 2020-07-30
- размер пакета уменьшен на треть с *14 828 318 / **1 571 251*** до *11 423 179 / **1 056 276*** для dev и prod версий соответственно
- сделана зависимость пакета от внешних стилей в :root переменных
  - все виджеты переведены на :root переменные 
  - удалены все ссылки на имена классов из goodt-framework-css
  - удален default class name из getColor
- изменены стили
  - удалены _theme.less и _sizes.less
  - изменен кастомный _all.less, теперь он собирает в себя goodt-framework-css как есть
  - styles.css содержит только подключаемые основные шрифты + material design icons
  - добавлены _widget.less с общими стилями виджетов
- удалены и переписаны виджеты
  - из spline удален код для отрисовки гистограмм сравнения и кастомные стили
  - переписаны виджеты averageNumber и solidGauge
  - удален виджет indicatorsTable
  - исправлены кавычки в шаблонах
- удалены настройки settingsPresets.common
- goodt-framework-css@1.0.22

##### 0.13.3 / 2020-07-23
- добавлена настройка PasswordSetting

##### 0.13.2 / 2020-07-22
- функции по созданию настроек вынесены наружу и могут быть подключены из вызывающей среды

##### 0.13.1 / 2020-07-16
- авторизация прокидывается через localStorage
- возвращается 401 + код ошибки
- исправлены пути до goodt-framework-css в less-файлах

##### 0.13.0 / 2020-07-14
- добавлена авторизация на запросы

##### 0.12.2 / 2020-07-08
- getDataSource

##### 0.12.1 / 2020-07-04
- добавлен DataProvider::templateToRequests, возвращающий список запросов для graphQL по каждому dataSet
- в таблице запрещено добавлять новые dataSets

##### 0.12.0 / 2020-06-29
- дописан виджет Category, доделана визуализация
- из конструктора в dataProvider перенесены getDimensionsInfo и getDataSources
- dataProvider перенесен в WidgetConfig, чтобы между перерисовками он не пересоздавался и работал кеш
- dataProvider переписан на async/await
- в SettingsGroup добавлено поле для подсказки hint
- добавлены подсказки на отступы

##### 0.11.2 / 2020-06-25
- добавлен проброс ошибок
- исправлена ошибка в Report

##### 0.11.1 / 2020-06-23
- добавлен виджет категорий
- в методах сериализации dataSet добавлен учет widgetType
- в convertTimeSeriesToData учитываются значения для groupBy

##### 0.11.0 / 2020-06-20
- обновлены версии npm-пакетов
- актуализирован код

##### 0.10.5 / 2020-06-11
- исправлена обработка получение двойного клика при быстром нажатии в проваливании.
- в виджет STATIC возвращена только одна ось по X и Y, т.к. echarts не умеет рисовать линию с насечками для мультиосей осей справа, когда по осям X и Y стоят values
- удалено изменение позиции оси Y из виджета STATIC т.к. не работает (см. выше)

##### 0.10.4 / 2020-06-10
- проваливание в интервалы переделано с dblclick на click

##### 0.10.3 / 2020-06-10
- исправлено проваливание в интервалы и возврат из них

##### 0.10.2 / 2020-06-08
- добавлены настройки заголовка, осей, значения и пр. в виджет STATIC
- форматированный вывод значений для STATIC
- множественные оси X и Y для STATIC
- для графиков на базе echarts добавлена заливка области графика
- в KPI настройки значения перенесены внутрь dataSet
- дописаны unix-версии npm-команд

##### 0.10.1 / 2020-06-05
- в KPI добавлены единицы измерения
- форматирование значения вынесено в SettingsHelper

##### 0.10.0 / 2020-06-04
- zoom для интервалов на графике
    - настройка вкл/выкл zoom
    - добавлена обработка нажатия на оси Х
    - интерфейс управления "влево"/"вправо"/"вверх" по интервалам
- виджет KPI
- новые хелперы
    - data.helper.ts - хелпер для работы с датой
    - state.helper.ts - хелпер для хранения и восстановления состояний объектов
    - orgUnits.helper.ts - изменение orgUnits вынесено в отдельный хелпер
- для нескольких графиков на ось X добавляются отсутствующие значения в датах 
- исправлена загрузка данных из settings в шаблонах, мог приходить null
- исправлена ошибка с суммированием значения для отображения в виде стека
- убраны undefined стили из виджета report

##### 0.9.0 / 2020-05-26
- добавлены типы отображения гистограм - normal / stack / overlap
- добавлены условия на отображение настроек
- настройки для стиля линии теперь отображаются только для LINE
- добавлены отступы между сериями (barGap) и между категориями (barCategoryGap) в гистограмме для виджетов SPLINE/PROFILE/DISTRIBUTION
- закомментированы источники данных для почты

##### 0.8.36 / 2020-05-20
- в PROFILE и DISTRIBUTION перенесены все настройки из SPLINE
- добавлены внутренние отступы для виджетов, для отступов от графика изменено название настройки на chartPaddings
- добавлен цвет легенды
- добавлена ширина линии графика
- округления интервала оси Y
- разделены настройки одной оси и мультиосей, одна ось нужна для PROFILE и DISTRIBUTION, мультиоси для SPLINE
- в SettingsGroup добавлена настройка oneLineRows, которая отключает автоматическое распределение настроек по колонкам
- удален graphqlApiUrl. В DataProvider используется единый apiUrl для всех урлов
- все настройки по-умолчанию свернуты

##### 0.8.35 / 2020-05-19
- удален виджет Avatar
- настройка background добавлена в виджеты averageNumbers, profile, distribution, report, solidGauge, static
- из Spline удалена обработка globalCardSettings, xAxisSettings

##### 0.8.34 / 2020-05-17
- убран overflow:hidden для таблиц

##### 0.8.33 / 2020-05-16
- добавлены дополнительные источники данных для почты при получении параметров по шине

##### 0.8.32 / 2020-05-16
- из таблицы убран невалидный css-класс
- в Profile добавлена обработка запросов по orgunits

##### 0.8.31 / 2020-05-13
- добавлен NONE для Frequency

##### 0.8.30 / 2020-05-13
- добавлены настройки заголовка и значения в виджет "Отчет"
- значение виджета "Отчет" отображается в процентах
- получение настроек заголовка перенесено в settings.helper
- данные о входящих по шине значений отображаются в groupCollapsed

##### 0.8.29 / 2020-05-11
- таблица слушает изменения дерева орг.структуры

##### 0.8.28 / 2020-05-11
- названия значений таблицы из dimensions { entity }
- зебра в виджете таблицы

##### 0.8.26 / 2020-05-08
- исправлен мержинг dimensions для таблицы

##### 0.8.25 / 2020-05-08
- hasEntity for DataProvider

##### 0.8.24 / 2020-05-08
- Данные о выборе dimensions заменены с события на строковые ID

##### 0.8.23 / 2020-05-07
- поддержка произвольного количества изменяемых dimensions
- изменен формат события на изменение OrgUnits

##### 0.8.22 / 2020-05-07
- внешнее изменение OrgUnits
- добавлены metricFilters
- удалены лишние сериализаторы для DataSource

##### 0.8.20 / 2020-04-30
- виджет Report

##### 0.8.19 / 2020-04-30
- виджет Profile 
- виджет Distribution 
- настройки fill и label вынесены в helper и подключены к Profile и Distribution 

##### 0.8.18 / 2020-04-27
- сокращен размер пакета на 40кб из-за lodash
- исправлены даты на оси Х
- отображение названия оси
- цвет названия оси
- отступ от оси до названия
- отображение насечек на оси
- легенда, название, расположение, отступ

##### 0.8.17 / 2020-04-23
- настройки для осей X
- цветовая настройка может принимать пустое значение
- цвета осей и подписей на графике наследуются от цвета графика

##### 0.8.16 / 2020-04-22
- настройки заголовка
- цифровая настройка может принимать значение пустой строки

##### 0.8.15 / 2020-04-19
- сделано отдельное редактирование осей и связывание их с dataSets
- у настроек сделаны строки с произвольным количеством элементов
- настройкам добавлен флаг collapsed
- исправлен угол градиента
- SettingsArraySetting -> SettingsGroupSetting
- добавлены настройки ArraySetting для произвольного массива
- удален NameValueArray

##### 0.8.14 / 2020-04-17
- исправлен запрос для табличных данных

##### 0.8.13 / 2020-04-14
- добавлен класс Constants для значений литеральный констант
- DataProvider и Constants вынесены в отдельные модули
- axios заменен на fetch

##### 0.8.12 / 2020-04-13
- из WidgetTemplate удален viewType
- chartType перенесен из DataSetTemplate в DataSetTemplate::settings
- вынесены общие настройки виджетов
- в общие настройки добавлены внутренние отступы виджетов и расстояние между осями
- в конфиг виджетов (settings.ts) вместо initAmount добавлен массив initDataSets
- закомментирован весь говнокод, который затянули в spline
- сделан нормальный расчет расстояний между осями
- добавлен парсинг трехзначных цветов типа #abc

##### 0.8.11 / 2020-04-09
- размер шрифта метки
- цвет метки
- заливка в режиме histogram

##### 0.8.10 / 2020-04-08
- заливка графика градиентом
- настройка градиента
- значения по умолчанию для функций make

##### 0.8.9 / 2020-04-07
- fix symbol size on echart graphic 
- для гистограммы сделано вертикальное отображение значений по-умолчанию

##### 0.8.8 / 2020-04-07
- подключены настройки labelFormat (формат подписи на графике)
- изменены настройки echart по-умолчанию
- поддержка альфа-канала
- новый colorPicker
- изменена структура IColor, добавлен IRgbaHex и color.helper

##### 0.8.7 / 2020-04-07
- отображение настроек lineFormat

##### 0.8.6 / 2020-04-06
- в spline добавлено поле lineStyle.type
- переименованы:
    - widgets\..\config.ts -> widgets\..\settings.ts
    - makeConfig() -> makeSettings()
    - WidgetInfoSettingsItem -> WidgetSettingsItem
    - WidgetSettings -> WidgetSettingsArray
    - IWidgetInfo -> IWidgetSettings
    - WidgetInfoSettings.ts -> makeSettings.ts
- добавлены текстовые названия для каждой настройки виджета (label)
- исправлен тип operation в AggregationDataSource
- исправлен тип methods в DataSetTemplate
- из интерфейсе IChart удалено описание метода run()
- переписан процесс создания виджета, добавлены методы получения настроек getSettings(), из метода run() удалены входные параметры
- widgetSettings и chartData теперь хранятся в базовом классе Chart, а не пробрасываются между методами
- в \widgetSettings и \widgetSettings\settings добавлены index.ts для упрощения доступа
- обновлен README.md 

##### 0.8.5 / 2020-04-04
- чистка кода от ошибкок
- исправлена ошибка доступа к dom-элементам в виджете solidGauge
- исправлены ошибки цикла for..in в spline
- удалены ненужные sass-файлы и sass-loader

##### 0.8.4 / 2020-04-04
- добавился новый тип вложенных настроек SettingsArray
- для упрощения в настройки добавлен type DefaultType
- улучшена документация по созданию новых настроек в README.md 

##### 0.8.3 / 2020-04-03
- Переименование колонок в виджете таблицы
- Стили назначенные на теги, убраны внутрь классов, чтобы не оказывать влияние на глобальные
- Добавлены settings в JoinDataSetTemplate

##### 0.8.2 / 2020-04-02
- Включен виджет KPI

##### 0.8.1 / 2020-04-01
- Enable production mode for building to publishing
- Update echarts 4.2.1 -> 4.7.0

##### 0.8.0 / 2020-04-01
###### Настройки
- Сделаны настройки виджетов
- В каждый виждет добавлен config.ts для описания конфигурации виджета + функции для создания конфига (статическая типизация) 
- Добавлен метод WidgetFactory::loadWidgetConfig для загрузки конфигурации виджета в среду интеграции
- Виджеты и конфиги изолированы в отдельные namespaces чтобы можно было давать одинаковые названия классам конфигурации
- из dataProvider убрано автоматическое заполнение settings.title
- в Chart добавлены методы получения настроек
- удалены все классы настроек (WidgetTemplateSettings и DataSetSettings) виджетов
- для YAxisTypes добавлен массив значений YAxisTypesValues, чтобы можно было использовать в качестве значений в настройках 
###### Виджеты
- убран класс [icon-] из IndicatorsTable, который вылазил в глобальный scope
- spline переведен на шаблоны
- учитывается groupBy в table
###### TypeScript
- tsconfig переведен на module=esnext, targer=es2018
- typescript@3.7.2
- prefer-const + рефакторинг ошибок

##### 0.7.3 / 2020-03-25
- Визуализация виджета Table
- Проверки на single/aggregation data source сделаны через type guard

##### 0.7.2 / 2020-03-23
- из TimeSeriesDataSetShort удален viewType, он перенесен на уровень dataProvider

##### 0.7.1 / 2020-03-20
- в TimeSeriesDataSetShort добавлен viewType для совместимости с беком

##### 0.7.0 / 2020-03-16
- добавлен JoinDataSetTemplate, изменена логика работы с WidgetTemplate::dataSet
- JoinDataSetTemplate автоматически дополняется viewType из WidgetTemplate
- обобщены вызовы graphql методов, удалены методы вида loadStaticData
- закомментрированы виджеты KPI и avatar
- удален SearchBar

##### 0.6.8 / 2020-03-03
- переписан виджет "спидометр"
- в таблице индикторов добавлено удаление событий hammer

##### 0.6.7 / 2020-02-18
- исправлена передача метрик в graphQL в Static

##### 0.6.6 / 2020-02-12
- в Spline восстановлены стили из Awesome

##### 0.6.5 / 2020-02-05
- Awesome перенесен в Spline
- добавлен ProfileAndDistribution

##### 0.6.4 / 2020-01-20
- settings виджетов унаследованы от WidgetTemplateSettings
- табличный виджет поддерживает много dimensions
- добавлены виджеты KPI, awesome и avatar

##### 0.6.3 / 2020-01-09
- табличный виджет с множеством параметров + верстка
- структуры данных приведены в соотв. с graphQL и разнесены в отдельную папку

##### 0.6.2 / 2019-12-26
- Рефакторинг сериализаторов
- добавлена поддержка getTableData
 
##### 0.6.0 / 2019-12-25
- Переделано создание и удаление виджетов
- Обработчики resize и eventBus сделаны через переменные для сохранения контекста
- EventBus 1.1.1
- Очистка /lib перед сборкой
- автоматизарована и упрощена обработка событий
- добавлен метод IChart:redraw для перерисовки текущего состояния виджета без пересоздания

##### 0.5.0 / 2019-12-13
- Переименованы все виджеты. Удален суффикс Chart. Виджеты перемещены в отдельную папку /src/widgets.
- Переделан внутренний импорт виджетов в сторону автоматизации.
- Переделана сборка - больше не надо прописывать виджеты в webpack.common. Все виджеты автоматически собираются в отдельный файлы.
- README.md Дописано описание проекта и порядка создания нового виджета.
